#!/bin/sh
#http://gitlab.com/morgaux/bin

#
# dman(1) - use dmenu to search and open a man pages
#

set -e

dependencies dmenu st man

SEARCH=""
DFLAGS=""

while [ "$#" -gt 0 ]
do
	case "$1" in
	'-b'|'-f'|'-i'|'-v')
		DFLAGS="$DFLAGS $1" ;;
	'-l'|'-m'|'-p'|'-fn'|'-nb'|'-nf'|'-sb'|'-sf'|'-w')
		DFLAGS="$DFLAGS $1 $2" ; shift ;;
	*)
		break ;;
	esac
	shift
done

# shellcheck disable=SC2086
st -e man "$(man -k "${SEARCH:-"."}" | sed 's/(.*//g' | dmenu -p "man page:" ${DFLAGS})"

