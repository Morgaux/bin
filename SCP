#!/bin/sh

# Usage check
usage()
{
	echo "SCP - Fetch Secure Contain Protect Foundation Documents"
	echo "Not to be confused with scp - Secure Copy Protocol"
	echo "usage: SCP [ OPTIONS ... ] DOCUMENT"
	exit 0
}

[ $# -gt 0 ] || usage

# Declarations
DOCPATH="$HOME/Documents/SCP"
LESSDOC="FALSE"
SAVEDOC="FALSE"

# Functions
getDocumentSCP()
{
	lynx -dump "http://scp-wiki.wikidot.com/scp-$1" | sed -n '/IFRAME/,$p' | tail -n +4 | sed -n '/page revision/q;p'
}

showDocumentSCP()
{
	[ -d "$DOCPATH" ] || mkdir -p "$DOCPATH"

	case "$1" in
		*)
			getDocumentSCP $1
			;;
	esac
}

main()
{
	while [ $# -gt 0 ] ; do
		case $1 in
			-h|--help)
				shift
				usage
				;;
			-l|--less)
				shift
				LESSDOC="TRUE"
				;;
			-s|--save)
				shift
				SAVEDOC="TRUE"
				;;
			*)
				getDocumentSCP "$1"
				shift
				;;
		esac
	done
}

main "$@"

