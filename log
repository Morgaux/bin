#!/bin/sh
#http://gitlab.com/morgaux/bin

#
# log a message to ~/var/log
#

log_mesg() {
	STAMP="$(date +%s)"
	PARENT="$(ps -o comm= $PPID)"
	MSG="$@"

	[ -d "$HOME/var" ] || mkdir -p "$HOME/var"
	[ ! "$MSG" = "" ] && echo "$STAMP : $PARENT : $MSG" >> ~/var/log
}

show_log() {
	tail -n $1 ~/var/log 2>/dev/null && return 0
	tail ~/var/log 2>/dev/null && return 0
	err "log cannot be viewed"
	exit 1
}

<<<<<<< HEAD
trim_log() {
	SIZE="$(wc -c ~/var/log | awk '{print $1}')"
}

=======
usage() {
	echo "log - log a message to ~/var/log"
	echo "usage: log [ -h | --help ] [ --show ] [ MSG ]"
	echo "options:"
	echo "	-h	--help		show this message"
	echo "	--show			show the last 10 logs"
	echo "	--show LINES		show the last LINES logs"
	exit 1
}

while true; do
	case $1 in
		-*) case $1 in
			"--show") show_log; shift;;
			"-h"|"--help") usage;;
			*) err "unknown option: $1" || exit 1;;
		esac;;
		*) break;;
	esac
done

>>>>>>> c7114c60e098b800379abf172e7b1aa5cc26ec46
log_mesg "$@"

